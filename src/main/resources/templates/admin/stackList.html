<!doctype html>
<html
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns="http://www.w3.org/1999/html"
        layout:decorate="~{layout/default_layout}" lang="ko">

<div layout:fragment="content">
    <script th:inline="javascript">
        function fillModifyForm(name, id) {
            // name input 엘리먼트에 값 설정
            document.getElementById('modify').value = name;
            // hidden input 엘리먼트에 id 설정
            document.getElementById('modifyId').value = id;
        }

        function modifyStack() {
            var name = document.getElementById('modify').value;
            var id = document.getElementById('modifyId').value;

            // AJAX를 사용하여 서버로 데이터 전송
            $.ajax({
                url: '/your-server-endpoint-for-modify',
                type: 'POST',
                data: {name: name, id: id},
                success: function(response) {
                    // 성공 시 처리 로직
                    console.log('Modification successful');
                },
                error: function(error) {
                    // 실패 시 처리 로직
                    console.error('Modification failed');
                }
            });
        }
    </script>

    <main>
        <header class="site-header d-flex flex-column justify-content-center align-items-center">
        </header>

        <section class="latest-podcast-section" id="section_2">
            <div class="container">
                <div class="row justify-content-center">
                    <!-- 전체 박스 크기 -->
                    <div class="col-lg-9 col-12">
                        <div class="section-title-wrap mb-5">
                            <h4 class="section-title">기술스택 관리</h4>
                        </div>

                        <div style="margin-top: 10%" class="row justify-content-center">
                            <div class="card bg-outline-light bg-transparent text-dark shadow-lg col-12 post-form">
                                <div class="col-12 mt-5"></div>

                                <!-- 입력, 검색섹션 시작 -->
                                <div class="card p-4 col-11 post-form align-self-center">
                                    <div class="input-group m-1">
                                        <input type="text" class="form-control" placeholder="Search">
                                        <button class="btn " type="submit">검색</button>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="row justify-content-center">
                            <div class="card bg-outline-light bg-transparent text-dark shadow-lg col-12 post-form">
                                <div class="col-12 mt-5"></div>

                                <!-- 목록 시작 -->
                                <div class="card mt-4 mb-4 p-4 col-11 post-form align-self-center">
                                    <div class="mb-1">
                                        <label for="register">스택 등록</label>
                                    </div>
                                    <div class="col-12 mt-2 input-group">
                                        <input type="text" name="name" id="register"
                                               class="form-control" placeholder="스택명 기입" required="" />
                                        <button class="btn" type="button">등록</button>
                                    </div>

                                    <div class="mb-1">
                                        <label for="modify">스택 수정</label>
                                    </div>
                                    <div class="col-12 mt-2 input-group">
                                        <input type="text" name="name" id="modify"
                                               class="form-control" placeholder="스택명 수정" required="" />
                                        <!-- hidden input으로 수정할 스택의 id 저장 -->
                                        <input type="hidden" name="id" id="modifyId" />
                                        <button class="btn" type="button" onclick="modifyStack()">수정</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 목록 -->
                        <div class="row justify-content-center">
                            <!-- 목록 1칸 -->
                            <div class="col-lg-10 col-12 mb-4 mb-lg-2 post-form" th:each="stackList : ${totalStackList}">
                                <div th:each="stack: ${stackList}" >
                                    <div class="custom-block d-flex">
                                        <div class="custom-block-info">
                                            <div class="mb-2 d-inline-flex" th:if="${stack.id}">
                                                <button class="badge" style="background-color: #717275"
                                                        th:text="${stack.name}"
                                                        onclick="fillModifyForm('${stack.name}', '${stack.id}')">
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>
    </main>
</div>

</html>
